@{
    ViewBag.Title = "Home Page";

}

<div class="jumbotron">
    <h1>GoatWebShop </h1>
    <h2>For all you g(a)otta have things in life</h2>
    @*<p><a href="https://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>*@
</div>


<div class="row">
    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>
            ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
            enables a clean separation of concerns and gives you full control over markup
            for enjoyable, agile development.
        </p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301866">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301867">Learn more &raquo;</a></p>
    </div>
</div>

<div class="row">
    <div class="products">

    </div>
</div>

<button onclick="getProducts();">products</button>

@section scripts
{
    <script type="text/javascript">

        $(document).ready(function() {
            getProducts();
        });

        function getProducts() {
            $.ajax({
                url: 'http://localhost:52626/api/ProductsApi',
                type: 'GET',
                success: function (data) {
                    console.log(data);
                    $('.products').html('');
                    for (var i = 0; i < data.length; i++) {

                        console.log(data[i]);
                        var ProductDiv = $(
                            '<div class="col-sm-6 col-md-4">' +
                            '<div class="thumbnail">' +
                            '<div class="caption">' +
                            '<h3>' + data[i].Name + '</h3> ' +
                            '<h2>€ ' + data[i].Price + '<small class="pull-right">' + data[i].Category.Category1 + '</small></h2>' +
                            '<p>' + ((data[i].Description) ? data[i].Description : "Nothing found!") + '</p><br /><br /> ' +
                            '<div class="row">' +
                            '<div class="col-md-8 col-md-offset-4">' +
                            '<div class="col-md-offset-5">' +
                            '<p>' + data[i].AmountInStock+ ' left in stock</p>' +
                            '</div>' +
                            '<p><a href="#" class="btn btn-primary" role="button">Buy Now</a> <a href="#" class="btn btn-default" role="button">Add to chart</a></p>' +
                            '</div>'+
                            '</div>' +
                            '</div>' +
                            '</div >' +
                            '</div >' );

                        if ((i+1) % 3 == 0) {
                            console.log(i+1);
                            //ProductDiv.append('bla');
                        }
                        $('.products').append(ProductDiv);
                    }
                }
            });
        }

        function newBike() {
            var bike = {
                Type: 0,
                RegistrationNumber: 80,
                PersonId: 1
            };

            $.ajax({
                url: 'http://localhost:54773/api/bikesAPI/',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(bike),
                succes: getData()
            });

        }
    </script>

}

